<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LawnCare Pro - Instant Quote</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for better aesthetics */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better mobile scroll */
            min-height: 100vh;
            margin: 0;
            padding: 1.5rem 0; /* Add vertical padding */
        }
        .main-container {
            max-width: 500px;
            width: 90%; /* Responsive width */
            text-align: center;
        }
        .card {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); /* Stronger shadow */
            border: 1px solid #e2e8f0; /* Light border */
            margin-top: 2rem; /* Space from header */
        }
        input[type="number"],
        select {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border: 1px solid #cbd5e1; /* Light gray border */
            border-radius: 0.75rem; /* Rounded input fields */
            font-size: 1rem;
            box-sizing: border-box;
            -webkit-appearance: none; /* Remove default select arrow */
            -moz-appearance: none;
            appearance: none;
            /* Updated SVG for a simpler, smaller down arrow */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em 1em; /* Smaller arrow size */
        }
        .upload-area {
            border: 2px dashed #cbd5e1; /* Dashed border */
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px; /* Ensure enough height */
        }
        .upload-area:hover {
            background-color: #f8fafc; /* Light hover effect */
        }
        .upload-area input[type="file"] {
            display: none; /* Hide actual file input */
        }
        .upload-icon {
            font-size: 2.5rem;
            color: #94a3b8; /* Gray icon */
            margin-bottom: 0.5rem;
        }
        .uploaded-file-name {
            display: inline-block; /* Make it behave like a block but allow horizontal arrangement if needed */
            background-color: #e2e8f0; /* Light gray background for the file name box */
            padding: 0.3rem 0.75rem; /* Padding inside the box */
            border-radius: 0.5rem; /* Rounded corners for the file name box */
            font-size: 0.875rem;
            color: #475569; /* Darker text color for better contrast */
            margin-top: 0.75rem; /* Space from the upload text */
            word-break: break-all; /* Break long file names */
            max-width: 90%; /* Limit width to prevent overflow */
            overflow: hidden; /* Hide overflow if text is too long */
            text-overflow: ellipsis; /* Add ellipsis for long text */
            white-space: nowrap; /* Prevent text from wrapping */
        }
        button {
            background-color: #1a202c; /* Dark button */
            color: white;
            padding: 0.85rem 1.5rem;
            border-radius: 0.75rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            background-color: #2d3748; /* Darker on hover */
            transform: translateY(-2px); /* Slight lift effect */
        }
        button:active {
            transform: translateY(0); /* Press effect */
        }
        .loading-spinner {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #1a202c; /* Dark color for spinner */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
            display: none; /* Hidden by default */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Your Quote Section */
        .quote-section {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-top: 2rem;
            text-align: center;
            display: none; /* Hidden by default */
        }
        .quote-section h2 {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 1rem;
        }
        .quote-price {
            font-size: 3rem; /* Larger price font */
            font-weight: 800;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }
        .quote-description {
            font-size: 1rem;
            color: #64748b;
            margin-bottom: 1.5rem;
        }
        .quote-details-box {
            background-color: #f8fafc; /* Light background for details */
            padding: 1.5rem;
            border-radius: 1rem;
            text-align: left;
            border: 1px solid #e2e8f0;
        }
        .quote-details-box h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 0.75rem;
        }
        .quote-details-box ul {
            list-style: none; /* Remove default list style */
            padding: 0;
            margin: 0;
        }
        .quote-details-box ul li {
            font-size: 0.95rem;
            color: #475569;
            margin-bottom: 0.5rem;
            position: relative;
            padding-left: 1.25rem; /* Space for bullet */
        }
        .quote-details-box ul li::before {
            content: 'â€¢'; /* Custom bullet point */
            position: absolute;
            left: 0;
            color: #64748b; /* Bullet color */
            font-weight: bold;
        }

        /* Modal styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="main-container">
        <!-- Header Section -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center mb-2">
                <i class="fas fa-cut text-4xl text-gray-800 mr-3 transform -rotate-45"></i>
                <h1 class="text-4xl font-bold text-gray-800">LawnCare Pro</h1>
            </div>
            <p class="text-lg text-gray-600">Get an instant quote for your lawn mowing service</p>
        </div>

        <!-- Main Card Section -->
        <div class="card">
            <div class="flex items-center text-left mb-6">
                <i class="fas fa-clipboard-list text-2xl text-gray-700 mr-3"></i>
                <h2 class="text-2xl font-semibold text-gray-800">Lawn Details</h2>
            </div>

            <div class="mb-4 text-left">
                <label for="grassHeight" class="block text-gray-700 text-sm font-semibold mb-2">
                    Current Grass Height (inches)
                </label>
                <input type="number" id="grassHeight" placeholder="e.g., 4" class="focus:ring-blue-500 focus:border-blue-500">
            </div>

            <div class="mb-6 text-left relative">
                <label for="yardArea" class="block text-gray-700 text-sm font-semibold mb-2">
                    Yard Area
                </label>
                <select id="yardArea" class="focus:ring-blue-500 focus:border-blue-500">
                    <option value="" disabled selected>Select yard area to mow</option>
                    <option value="frontOnly">Front Yard Only</option>
                    <option value="backOnly">Back Yard Only</option>
                    <option value="frontAndBack">Front and Back Yard</option>
                    <option value="custom">Custom Area</option>
                </select>
            </div>

            <div class="mb-6 text-left">
                <p class="block text-gray-700 text-sm font-semibold mb-3">
                    Upload Yard Images (Optional - for better pricing)
                </p>
                <!-- Front Yard Image Upload -->
                <div id="frontYardUploadArea" class="upload-area mb-4">
                    <input type="file" id="frontYardImage" accept="image/*">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <p class="text-gray-700 font-medium">Upload Front Yard Image</p>
                    <span id="frontYardFileName" class="uploaded-file-name hidden"></span>
                </div>

                <!-- Back Yard Image Upload -->
                <div id="backYardUploadArea" class="upload-area">
                    <input type="file" id="backYardImage" accept="image/*">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <p class="text-gray-700 font-medium">Upload Back Yard Image</p>
                    <span id="backYardFileName" class="uploaded-file-name hidden"></span>
                </div>
            </div>

            <button id="calculatePriceBtn">Calculate Price</button>

            <div id="loadingSpinner" class="loading-spinner"></div>
        </div>

        <!-- Your Quote Section -->
        <div id="quoteSection" class="quote-section">
            <h2>Your Quote</h2>
            <div class="quote-price" id="displayPrice">$0.00</div>
            <p class="quote-description">Estimated price for your lawn mowing service</p>
            <div class="quote-details-box">
                <h3>Quote Details:</h3>
                <ul>
                    <li id="detailGrassHeight"></li>
                    <li id="detailArea"></li>
                    <li id="detailImagesProvided"></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" id="closeModalBtn">&times;</span>
            <p id="modalMessage" class="text-lg text-gray-800"></p>
        </div>
    </div>

    <script>
        // Get DOM elements
        const grassHeightInput = document.getElementById('grassHeight');
        const yardAreaSelect = document.getElementById('yardArea');
        const frontYardImageInput = document.getElementById('frontYardImage');
        const backYardImageInput = document.getElementById('backYardImage');
        const frontYardUploadArea = document.getElementById('frontYardUploadArea');
        const backYardUploadArea = document.getElementById('backYardUploadArea');
        const frontYardFileNameSpan = document.getElementById('frontYardFileName');
        const backYardFileNameSpan = document.getElementById('backYardFileName');
        const calculatePriceBtn = document.getElementById('calculatePriceBtn');
        const loadingSpinner = document.getElementById('loadingSpinner');

        // New Quote Section elements
        const quoteSection = document.getElementById('quoteSection');
        const displayPrice = document.getElementById('displayPrice');
        const detailGrassHeight = document.getElementById('detailGrassHeight');
        const detailArea = document.getElementById('detailArea');
        const detailImagesProvided = document.getElementById('detailImagesProvided');

        const modal = document.getElementById('myModal');
        const modalMessage = document.getElementById('modalMessage');
        const closeModalBtn = document.getElementById('closeModalBtn');

        /**
         * Displays a custom modal message.
         * @param {string} message - The message to display in the modal.
         */
        function showModal(message) {
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
        }

        // Close modal when the close button is clicked
        closeModalBtn.onclick = function() {
            modal.classList.add('hidden');
        }

        // Close modal when clicking outside of the modal content
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.classList.add('hidden');
            }
        }

        // Handle file name display for front yard image
        frontYardUploadArea.addEventListener('click', () => {
            frontYardImageInput.click();
        });
        frontYardImageInput.addEventListener('change', (event) => {
            if (event.target.files.length > 0) {
                frontYardFileNameSpan.textContent = event.target.files[0].name;
                frontYardFileNameSpan.classList.remove('hidden'); // Show the file name span
            } else {
                frontYardFileNameSpan.textContent = '';
                frontYardFileNameSpan.classList.add('hidden'); // Hide if no file selected
            }
        });

        // Handle file name display for back yard image
        backYardUploadArea.addEventListener('click', () => {
            backYardImageInput.click();
        });
        backYardImageInput.addEventListener('change', (event) => {
            if (event.target.files.length > 0) {
                backYardFileNameSpan.textContent = event.target.files[0].name;
                backYardFileNameSpan.classList.remove('hidden'); // Show the file name span
            } else {
                backYardFileNameSpan.textContent = '';
                backYardFileNameSpan.classList.add('hidden'); // Hide if no file selected
            }
        });

        /**
         * Calculates the lawn mowing price based on grass height and yard area,
         * with an optional discount for provided images.
         * @param {number} grassHeight - The current grass height in inches.
         * @param {string} yardArea - The selected yard area option.
         * @param {boolean} imagesProvided - True if any images were uploaded.
         * @returns {number} The estimated price.
         */
        function calculatePrice(grassHeight, yardArea, imagesProvided) {
            let basePrice = 40; // Starting base price
            const HEIGHT_FACTOR = 5; // Price increases by $5 per inch of height
            const AREA_FACTORS = {
                "frontOnly": 1,
                "backOnly": 1.1, // Slightly more for back yard typically
                "frontAndBack": 1.8, // Discount for doing both
                "custom": 1.5 // Placeholder for custom, could be more dynamic
            };
            const IMAGE_DISCOUNT_PERCENTAGE = 0.05; // 5% discount

            if (grassHeight < 0) grassHeight = 0; // Ensure non-negative height

            // Adjust price based on grass height
            basePrice += (grassHeight * HEIGHT_FACTOR);

            // Adjust price based on yard area
            if (yardArea && AREA_FACTORS[yardArea]) { // Ensure yardArea is selected and valid
                basePrice *= AREA_FACTORS[yardArea];
            } else {
                // If no valid yard area selected, apply a default factor or show error
                // For now, let's just use a default if nothing is selected
                basePrice *= 1;
            }


            // Apply image discount if images are provided
            if (imagesProvided) {
                basePrice *= (1 - IMAGE_DISCOUNT_PERCENTAGE);
            }

            // Minimum price
            if (basePrice < 35) {
                basePrice = 35;
            }

            return basePrice;
        }

        // Event listener for the calculate button
        calculatePriceBtn.addEventListener('click', () => {
            const grassHeight = parseFloat(grassHeightInput.value);
            const yardArea = yardAreaSelect.value; // Get the selected value
            const frontImage = frontYardImageInput.files[0];
            const backImage = backYardImageInput.files[0];
            const imagesProvided = (frontImage || backImage) ? true : false;

            // Input validation
            if (isNaN(grassHeight) || grassHeight < 0) {
                showModal("Please enter a valid grass height (0 or greater).");
                return;
            }
            if (!yardArea) { // Check if a yard area is selected
                showModal("Please select a yard area to mow.");
                return;
            }


            // Hide previous quote and show loading spinner
            quoteSection.style.display = 'none';
            loadingSpinner.style.display = 'block';
            calculatePriceBtn.disabled = true; // Disable button during calculation

            // Simulate a network request or complex calculation
            setTimeout(() => {
                const estimatedPrice = calculatePrice(grassHeight, yardArea, imagesProvided);

                // Hide loading spinner
                loadingSpinner.style.display = 'none';
                calculatePriceBtn.disabled = false; // Re-enable button

                // Display result in the new quote section
                displayPrice.textContent = `$${estimatedPrice.toFixed(2)}`;
                detailGrassHeight.textContent = `Grass height: ${grassHeight} inches`;

                let areaText = "";
                // Get the text of the selected option
                const selectedOption = yardAreaSelect.options[yardAreaSelect.selectedIndex];
                areaText = selectedOption ? selectedOption.textContent : "Not specified";

                detailArea.textContent = `Area: ${areaText}`;

                let imagesText = imagesProvided ? "Yes (5% discount applied)" : "No";
                detailImagesProvided.textContent = `Images provided: ${imagesText}`;

                quoteSection.style.display = 'block';

                // Log image information (for demonstration, actual image processing would be complex)
                if (frontImage) {
                    console.log(`Front Yard Image: ${frontImage.name} (${(frontImage.size / 1024).toFixed(2)} KB)`);
                } else {
                    console.log('No front yard image uploaded.');
                }
                if (backImage) {
                    console.log(`Back Yard Image: ${backImage.name} (${(backImage.size / 1024).toFixed(2)} KB)`);
                } else {
                    console.log('No back yard image uploaded.');
                }

            }, 1500); // Simulate 1.5 seconds calculation time
        });
    </script>
</body>
</html>
